2024.09.12

############### 使用说明 ###############


Q : 这是什么东西？可以干嘛？
A : 这是微信聊天记录的备份与恢复脚本，支持 7.0.0-当前最新版微信的 跨版本&跨设备&跨分区 单/多账号数据备份与恢复。


Q : 增量备份是什么？全量备份又是什么？有什么区别？
A : 增量备份只备份上一次在备份中没有备份到的文件，速度快消耗流量少，适合定时备份使用；全量备份每一次都备份全部的微信数据，适合刷机换机等需要临时备份的情况。


Q : backup.sh   recovery.sh   command各是什么？
A : backup.sh为备份脚本
    recovery.sh为恢复脚本，搭配使用。
    command文件夹内含脚本运行依赖，请不要删除，删除后会导致脚本无法运行。


Q : backup.sh recovery.sh (脚本文件) 应该怎么运行？
A : 您可以采取多种方式运行，比如在mt管理器中使用root执行 (推荐)、在termux等各种终端模拟器中先执行su获取root权限，再执行 sh 脚本路径 来执行脚本。


Q : 如何将备份数据包通过脚本自动上传到网盘？
A : 打开 backup.sh 修改配置即可。


Q : 我运行脚本时出现了错误，怎么办？
A : 大部分错误都加了提示与解决办法，请按提示操作即可，若遇到没有提示的错误或英文报错，您可以自行查找原因或截图私信 酷安@搓澡君 。


Q : 如何进行定时运行脚本？
A : 您可以通过软件Xposed edge（需要xposed框架与root权限）或软件tasker（需要root权限）进行定时备份，详细操作步骤请见https://czj.lanzoux.com/b0evzleqh中的 "tasker_or_edge食用方法.zip" 。


Q : 在xposed edge或tasker里执行脚本都提示No such file or directory ？
A : 只需要把存放脚本的文件夹名称中的 空格、符号删除后，重新编辑xposed edge或tasker中的定时任务即可。


Q : 不管是xposed edge还是tasker定时备份都不起作用？什么都没有显示？
A : 其实在正确设置了软件的情况下，定时备份就已经成功开始运行了，您只需要把backup.sh备份脚本内的 OutputLogMode 配置改成 "2" ，即可在脚本同目录下的BackupLog.txt文件看到执行日志。


A : 暂时只能想到这么多问题了，若您还有别的问题可私信 酷安@搓澡君 。



############### 更新日志 ###############


  [ 旧版脚本更新链接 ] https://czj.lanzoux.com/b0evzleqh
   [ v2.0.7_mod] 更新内容

1. 修复了若干BUG:
   支持新版微信备份（8.0.28及以上版本）

2.可能存在BUG:
   网盘备份可能存在BUG，后续版本尝试修复（如果修复不了就放弃了）





  [ v2.0.7 ] 更新内容

1. 修复了两个bug：
   修复了天翼云盘上传失败
   修复了天翼云盘Cookie登陆失败



  [ v2.0.6 ] 更新内容

1. 修复了一些bug：
   修复了阿里云盘恢复时下载失败
   修复了安卓12提示网络连接失败
   修复了安卓12恢复后无法收发语音



  [ v2.0.5 ] 更新内容

1. 优化备份逻辑：
   备份逻辑改为依据微信号备份，一个账号对应一份数据包
   （当不同分区上登录过相同账号时，脚本将会自动选择备份最新登录的账号）

2. 优化增量备份：
   依据 网盘/本地上一次备份时间 对当前数据进行增量备份，不再留下冗余的文件md5信息

3. 优化备份速度：
   使用多线程打包对数据进行备份，加快备份速度

4. 新增备份登录状态功能：
   若备份时微信账号处于已登录的状态，恢复时便可不登录直接进行恢复，恢复成功后微信账号将会完全还原到备份时的状态
   （实验性功能…QAQ ，有时恢复成功后会出现需要重新登录的情况，重新登录就可以啦 վ'ᴗ' ի ）

5. 修复了一些bug：
   修复了阿里云盘登录失败
   尽力修复了阿里云盘上传失败
   修复了因数据包名导致的拒绝上传
   修复了获取微信号失败
   修复了数据包无法分卷
   修复了执行后无法删除脚本
   修复了数据过多导致的备份失败
   修复了恢复成功后微信无法登陆
   修复了网盘登录失败、下载失败
   修复了没有安装双开微信却提示已安装
   修复了备份日志无法同时输出到屏幕与BackupLog.txt



###################################